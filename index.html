<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Waterwheel by acquia</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-dark.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/acquia/waterwheel-swift">View On GitHub</a></li>
          <li class="downloads"><a href="https://github.com/acquia/waterwheel-swift/zipball/master">ZIP</a></li>
          <li class="downloads"><a href="https://github.com/acquia/waterwheel-swift/tarball/master">TAR</a></li>
          <li class="title">DOWNLOADS</li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <p><img src="https://raw.githubusercontent.com/acquia/waterwheel-swift/assets/waterwheel.png" alt="Waterwheel - Drupal SDK"></p>

<p><a href=""><img src="https://img.shields.io/badge/Drupal-8-blue.svg" alt="Drupal version"></a>
<a href="#"><img src="https://img.shields.io/badge/platform-iOS%20%7C%20macOS%20%7C%20tvOS%20%7C%20watchOS-green.svg" alt="CocoaPods"></a>
<a href=""><img src="https://img.shields.io/cocoapods/v/waterwheel.svg?maxAge=43000" alt="CocoaPods"></a>
<a href="#carthage"><img src="https://img.shields.io/badge/Carthage-compatible-4BC51D.svg?style=flat" alt="Carthage compatible"></a>
<img src="https://img.shields.io/badge/swift-2.2%20%7C%202.3-orange.svg" alt="Swift version"></p>

<h4>
<a id="waterwheel-swift-sdk-for-drupal" class="anchor" href="#waterwheel-swift-sdk-for-drupal" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Waterwheel Swift SDK for <code>Drupal</code>
</h4>

<h6>
<a id="waterwheel-makes-using-drupal-as-a-backend-with-ios-macos-tvos-or-watchos-enjoyable-by-combining-the-most-used-features-of-drupals-apis-in-one-sdk---formerly-known-as-drupal-ios-sdk" class="anchor" href="#waterwheel-makes-using-drupal-as-a-backend-with-ios-macos-tvos-or-watchos-enjoyable-by-combining-the-most-used-features-of-drupals-apis-in-one-sdk---formerly-known-as-drupal-ios-sdk" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Waterwheel makes using Drupal as a backend with iOS, macOS, tvOS, or watchOS enjoyable by combining the most used features of Drupal's API's in one SDK. - Formerly known as Drupal iOS SDK.</h6>

<hr>

<p align="center">
    <a href="#features-in-4x">Features</a> •
    <a href="#configuration">Configuration</a> •
    <a href="#usage">Usage</a> •
    <a href="#installation">Installation</a> •
    <a href="#requirements">Requirements</a>
</p>

<hr>

<h2>
<a id="features-in-4x" class="anchor" href="#features-in-4x" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Features in 4.x</h2>

<ul>
<li>[x] Session management</li>
<li>[x] Basic Auth</li>
<li>[x] Cookie Auth</li>
<li>[x] Entity CRUD</li>
<li>[ ] True entities</li>
<li>[ ] Local caching</li>
<li>[x] LoginViewController</li>
<li>[ ] SignupViewController</li>
<li>[x] AuthButton</li>
<li>[ ] Views integration into Table Views</li>
</ul>

<p><a href="#">Back to Top</a></p>

<h2>
<a id="configuration" class="anchor" href="#configuration" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Configuration</h2>

<ol>
<li><code>import waterwheel</code></li>
<li>(Optional) If you're not using HTTPS you will have to enable the <a href="http://stackoverflow.com/questions/31254725/transport-security-has-blocked-a-cleartext-http">NSAppTransportSecurity</a>
</li>
</ol>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Usage</h2>

<p>The code below will give you access to the baseline of features for communicating to a Drupal site.</p>

<div class="highlight highlight-source-swift"><pre><span class="pl-c">// Sets the URL to your Drupal site.</span>
waterwheel<span class="pl-k">.</span>setDrupalURL(<span class="pl-s"><span class="pl-pds">"</span>http://drupal-8-2-0-beta1.dd<span class="pl-pds">"</span></span>)</pre></div>

<p>If is important to note that waterwheel makes heavy uses of <a href="https://developer.apple.com/library/ios/documentation/Swift/Conceptual/Swift_Programming_Language/Closures.html">Closures</a>, which allows us to pass functions as returns, or store them in variables.</p>

<h4>
<a id="login" class="anchor" href="#login" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Login</h4>

<p>The code below will set up Basic Authentication for each API call.</p>

<div class="highlight highlight-source-swift"><pre><span class="pl-c">// Sets HTTPS Basic Authentication Credentials.</span>
waterwheel<span class="pl-k">.</span>setBasicAuthUsernameAndPassword(<span class="pl-s"><span class="pl-pds">"</span>test<span class="pl-pds">"</span></span>, password: <span class="pl-s"><span class="pl-pds">"</span>test2<span class="pl-pds">"</span></span>);</pre></div>

<p>If you do not want to use Basic Auth, and instead use a cookie, waterwheel provides an authentication method for doing so.
Sessions are handled for you, and will restore state upon closing an app and reopening it.</p>

<div class="highlight highlight-source-swift"><pre>waterwheel<span class="pl-k">.</span>login(usernameField<span class="pl-k">.</span>text<span class="pl-k">!</span>, password: passwordField<span class="pl-k">.</span>text<span class="pl-k">!</span>) { (success, response, json, error) <span class="pl-k">in</span>
    <span class="pl-k">if</span> (success) {
        <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span>logged in<span class="pl-pds">"</span></span>)
    } <span class="pl-k">else</span> {
        <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span>failed to login<span class="pl-pds">"</span></span>)
    }
    <span class="pl-k">self</span><span class="pl-k">.</span>loginRequestCompleted(success: success, error: error)
}</pre></div>

<p>Waterwheel  provides a button to place anywhere in your app. The code below is iOS specific because of its dependence on UIKit. </p>

<div class="highlight highlight-source-swift"><pre><span class="pl-k">let</span> loginButton <span class="pl-k">=</span> waterwheelAuthButton()
<span class="pl-c">// When we press Login, lets show our Login view controller.</span>
loginButton<span class="pl-k">.</span>didPressLogin <span class="pl-k">=</span> {
    <span class="pl-k">let</span> vc <span class="pl-k">=</span> waterwheelLoginViewController()
    <span class="pl-c">// Lets Present our Login View Controller since this closure is for the loginButton press</span>
    <span class="pl-k">self</span><span class="pl-k">.</span>presentViewController(vc, animated: <span class="pl-c1">true</span>, completion: <span class="pl-c1">nil</span>)
}

loginButton<span class="pl-k">.</span>didPressLogout <span class="pl-k">=</span> { (success, error) <span class="pl-k">in</span>
    <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span>logged out<span class="pl-pds">"</span></span>)
}
<span class="pl-k">self</span><span class="pl-k">.</span>view<span class="pl-k">.</span>addSubview(loginButton)</pre></div>

<p>Taking this one step furthure, waterwheel also provides a LoginViewController. You can subclass this controller and overwrite it however you want. For our purposes we will use the default implementation.</p>

<div class="highlight highlight-source-swift"><pre><span class="pl-k">let</span> loginButton <span class="pl-k">=</span> waterwheelAuthButton()
<span class="pl-c">// When we press Login, lets show our Login view controller.</span>
loginButton<span class="pl-k">.</span>didPressLogin <span class="pl-k">=</span> {
    <span class="pl-c">// Lets build our default waterwheelLoginViewController.</span>
    <span class="pl-k">let</span> vc <span class="pl-k">=</span> waterwheelLoginViewController()
    <span class="pl-c">//Lets add our function that will be run when the request is completed.</span>
    vc<span class="pl-k">.</span>loginRequestCompleted <span class="pl-k">=</span> { (success, error) <span class="pl-k">in</span>
        <span class="pl-k">if</span> (success) {
            <span class="pl-c">// Do something related to a successfull login</span>
            <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span>successfull login<span class="pl-pds">"</span></span>)
            <span class="pl-k">self</span><span class="pl-k">.</span>dismissViewControllerAnimated(<span class="pl-c1">true</span>, completion: <span class="pl-c1">nil</span>)
        } <span class="pl-k">else</span> {
            <span class="pl-c1">print</span> (error)
        }
    }
    vc<span class="pl-k">.</span>logoutRequestCompleted <span class="pl-k">=</span> { (success, error) <span class="pl-k">in</span>
        <span class="pl-k">if</span> (success) {
            <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span>successfull logout<span class="pl-pds">"</span></span>)
            <span class="pl-c">// Do something related to a successfull logout</span>
            <span class="pl-k">self</span><span class="pl-k">.</span>dismissViewControllerAnimated(<span class="pl-c1">true</span>, completion: <span class="pl-c1">nil</span>)
        } <span class="pl-k">else</span> {
            <span class="pl-c1">print</span> (error)
        }
    }
    <span class="pl-c">// Lets Present our Login View Controller since this closure is for the loginButton press</span>
    <span class="pl-k">self</span><span class="pl-k">.</span>presentViewController(vc, animated: <span class="pl-c1">true</span>, completion: <span class="pl-c1">nil</span>)
}

loginButton<span class="pl-k">.</span>didPressLogout <span class="pl-k">=</span> { (success, error) <span class="pl-k">in</span>
    <span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">"</span>logged out<span class="pl-pds">"</span></span>)
}
<span class="pl-k">self</span><span class="pl-k">.</span>view<span class="pl-k">.</span>addSubview(loginButton)
</pre></div>

<p>Because these two items know whether you are logged in or out, they will always show the correct state of buttons. The UI is up to you, but at its default you get username, password and submit button.</p>

<h3>
<a id="node-methods" class="anchor" href="#node-methods" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Node Methods</h3>

<h4>
<a id="get" class="anchor" href="#get" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Get</h4>

<div class="highlight highlight-source-swift"><pre><span class="pl-c">// Get Node 36</span>
waterwheel<span class="pl-k">.</span>nodeGet(nodeId: <span class="pl-s"><span class="pl-pds">"</span>36<span class="pl-pds">"</span></span>, params: <span class="pl-c1">nil</span>, completionHandler: { (success, response, json, error) <span class="pl-k">in</span>
  <span class="pl-c1">print</span>(response)
})</pre></div>

<h4>
<a id="createpost" class="anchor" href="#createpost" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Create/post</h4>

<div class="highlight highlight-source-swift"><pre><span class="pl-c">//build our node body</span>
<span class="pl-k">let</span> body <span class="pl-k">=</span> [
    <span class="pl-s"><span class="pl-pds">"</span>type<span class="pl-pds">"</span></span>: [
        [
            <span class="pl-s"><span class="pl-pds">"</span>target_id<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>article<span class="pl-pds">"</span></span>
        ]
    ],
    <span class="pl-s"><span class="pl-pds">"</span>title<span class="pl-pds">"</span></span>: [
        [
            <span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>Hello World<span class="pl-pds">"</span></span>
        ]
    ],
    <span class="pl-s"><span class="pl-pds">"</span>body<span class="pl-pds">"</span></span>: [
        [
            <span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>How are you?<span class="pl-pds">"</span></span>
        ]
    ]
]

<span class="pl-c">// Create a new node.</span>
waterwheel<span class="pl-k">.</span>entityPost(entityType: <span class="pl-k">.</span>Node, params: body) { (success, response, json, error) <span class="pl-k">in</span>
    <span class="pl-k">if</span> (success) {
        <span class="pl-c1">print</span>(response)
    } <span class="pl-k">else</span> {
        <span class="pl-c1">print</span>(error)
    }
}</pre></div>

<h4>
<a id="updateputpatch" class="anchor" href="#updateputpatch" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Update/Put/PATCH</h4>

<div class="highlight highlight-source-swift"><pre><span class="pl-c">// Update an existing node</span>
waterwheel<span class="pl-k">.</span>nodePatch(nodeId: <span class="pl-s"><span class="pl-pds">"</span>36<span class="pl-pds">"</span></span>, node: body) { (success, response, json, error) <span class="pl-k">in</span>
    <span class="pl-c1">print</span>(response);
}</pre></div>

<h4>
<a id="delete" class="anchor" href="#delete" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Delete</h4>

<div class="highlight highlight-source-swift"><pre><span class="pl-c">// Delete an existing node</span>
waterwheel<span class="pl-k">.</span>nodeDelete(nodeId: <span class="pl-s"><span class="pl-pds">"</span>36<span class="pl-pds">"</span></span>, params: <span class="pl-c1">nil</span>, completionHandler: { (success, response, json, error) <span class="pl-k">in</span>
    <span class="pl-c1">print</span>(response)
})</pre></div>

<h2>
<a id="entity-requests" class="anchor" href="#entity-requests" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Entity Requests</h2>

<p>Since Node is rather specific, Watherweel provides entity methods as well for all entityTypes</p>

<h4>
<a id="entity-get" class="anchor" href="#entity-get" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Entity Get</h4>

<div class="highlight highlight-source-swift"><pre>waterwheel<span class="pl-k">.</span>entityGet(entityType: <span class="pl-k">.</span>Node, entityId: <span class="pl-s"><span class="pl-pds">"</span>36<span class="pl-pds">"</span></span>, params: params, completionHandler: completionHandler)</pre></div>

<h4>
<a id="entity-post" class="anchor" href="#entity-post" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Entity Post</h4>

<div class="highlight highlight-source-swift"><pre>waterwheel<span class="pl-k">.</span>sharedInstance<span class="pl-k">.</span>entityPost(entityType: <span class="pl-k">.</span>Node, params: node, completionHandler: completionHandler)</pre></div>

<h3>
<a id="entity-patch" class="anchor" href="#entity-patch" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Entity Patch</h3>

<div class="highlight highlight-source-swift"><pre>waterwheel<span class="pl-k">.</span>entityPatch(entityType: <span class="pl-k">.</span>Node, entityId: <span class="pl-s"><span class="pl-pds">"</span>36<span class="pl-pds">"</span></span>, params: nodeObject, completionHandler: completionHandler)</pre></div>

<h4>
<a id="entity-delete" class="anchor" href="#entity-delete" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Entity Delete</h4>

<div class="highlight highlight-source-swift"><pre>waterwheel<span class="pl-k">.</span>entityDelete(entityType: <span class="pl-k">.</span>Node, entityId: entityId, params: params, completionHandler: completionHandler)</pre></div>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Installation</h2>

<p>Waterwheel offers two installations paths. Pick your poison!</p>

<h2>
<a id="installation-1" class="anchor" href="#installation-1" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Installation</h2>

<h4>
<a id="cocoapods" class="anchor" href="#cocoapods" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>CocoaPods</h4>

<p>If you're using CocoaPods, just add this line to your Podfile:</p>

<div class="highlight highlight-source-ruby"><pre>pod <span class="pl-s"><span class="pl-pds">'</span>waterwheel<span class="pl-pds">'</span></span></pre></div>

<p>Install by running this command in your terminal:</p>

<div class="highlight highlight-source-shell"><pre>pod install</pre></div>

<p>Then import the library in all files where you use it:</p>

<div class="highlight highlight-source-swift"><pre><span class="pl-k">import</span> <span class="pl-c1">waterwheel</span></pre></div>

<h4>
<a id="carthage" class="anchor" href="#carthage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Carthage</h4>

<p>Just add to your Cartfile:</p>

<div class="highlight highlight-source-ruby"><pre>github <span class="pl-s"><span class="pl-pds">"</span>acquia/waterwheel-swift<span class="pl-pds">"</span></span></pre></div>

<p>Run <code>carthage update</code> to build the framework and drag the built <code>waterwheel.framework</code> into your Xcode project.</p>

<h2>
<a id="communication" class="anchor" href="#communication" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Communication</h2>

<ul>
<li>If you <strong>need help</strong>, use <a href="http://stackoverflow.com/questions/tagged/waterwheel-swift">Stack Overflow</a>. (Tag 'waterwheel-swift')</li>
<li>If you <strong>found a bug</strong>, open an issue.</li>
<li>If you <strong>have a feature request</strong>, open an issue.</li>
<li>If you <strong>want to contribute</strong>, submit a pull request.</li>
</ul>

<p><a href="#">Back to Top</a></p>

<h2>
<a id="drupal-compatibility" class="anchor" href="#drupal-compatibility" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Drupal Compatibility</h2>

<h4>
<a id="the-framework-is-tracking-drupal-8-as-new-features-come-out-in-8-they-will-be-added-asap-since-drupal-7-and-drupal-8-are-completely-different-in-terms-of-apis-you-will-need-to-use-the-correct-version-of-waterwheel-depending-on-your-drupal-version" class="anchor" href="#the-framework-is-tracking-drupal-8-as-new-features-come-out-in-8-they-will-be-added-asap-since-drupal-7-and-drupal-8-are-completely-different-in-terms-of-apis-you-will-need-to-use-the-correct-version-of-waterwheel-depending-on-your-drupal-version" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>The framework is tracking Drupal 8. As new features come out in 8, they will be added ASAP. Since Drupal 7 and Drupal 8 are completely different in terms of API's, you will need to use the correct version of waterwheel depending on your Drupal version.</h4>

<h2>
<a id="requirements" class="anchor" href="#requirements" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Requirements</h2>

<ul>
<li>iOS 8.0+ / Mac OS X 10.9+ / tvOS 9.0+ / watchOS 2.0+</li>
<li>Xcode 7.3+</li>
</ul>

<table>
<thead>
<tr>
<th align="center">waterwheel version</th>
<th align="center">Drupal version</th>
<th align="center">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><a href="https://github.com/kylebrowning/waterwheel-swift/tree/4.x">4.x</a></td>
<td align="center">Drupal 8 (Swift)</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><a href="https://github.com/kylebrowning/waterwheel-swift/tree/3.x">3.x</a></td>
<td align="center">Drupal 8 (Obj-C)</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><a href="https://github.com/kylebrowning/waterwheel-swift/tree/2.x">2.x</a></td>
<td align="center">Drupal 6-7 (Obj-C)</td>
<td align="center">Requires <a href="http://drupal.org/project/services">Services</a> module</td>
</tr>
</tbody>
</table>

<p><a href="#">Back to Top</a></p>
      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-3203637-9");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
